[gd_scene load_steps=11 format=2]

[ext_resource path="res://3DModels/Monster/monster.glb" type="PackedScene" id=1]
[ext_resource path="res://addons/randomAudioStreamPlayer/random_audio_stream_player.gd" type="Script" id=2]
[ext_resource path="res://Monster.gd" type="Script" id=3]
[ext_resource path="res://audio/monsterSee.wav" type="AudioStream" id=4]
[ext_resource path="res://addons/randomAudioStreamPlayer/random_audio_stream_player_3D.gd" type="Script" id=5]
[ext_resource path="res://audio/monsterNoise1.wav" type="AudioStream" id=6]
[ext_resource path="res://audio/monsterNoise2.wav" type="AudioStream" id=7]
[ext_resource path="res://audio/monsterStareDanger.wav" type="AudioStream" id=8]

[sub_resource type="BoxShape" id=1]
extents = Vector3( 0.505678, 2.6909, 1 )

[sub_resource type="BoxShape" id=2]
extents = Vector3( 0.208181, 0.284438, 0.214893 )

[node name="monster" groups=["monster"] instance=ExtResource( 1 )]
script = ExtResource( 3 )

[node name="Cube" parent="." index="0"]
transform = Transform( 0.474981, 0, 0, 0, 0.474981, 0, 0, 0, 0.474981, 0, 0.719474, -1.86265e-09 )
cast_shadow = 0

[node name="Cylinder" parent="." index="1"]
cast_shadow = 0

[node name="Cylinder001" parent="." index="2"]
cast_shadow = 0

[node name="Cube001" parent="." index="3"]
cast_shadow = 0

[node name="RayCast" type="RayCast" parent="Cube001" index="0"]
transform = Transform( 1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, -0.388615, 0.100992, -0.488606 )
enabled = true
cast_to = Vector3( 0, -60, 0 )
collision_mask = 131
collide_with_areas = true
debug_shape_custom_color = Color( 1, 0, 0, 1 )
debug_shape_thickness = 5

[node name="RayCast2" type="RayCast" parent="Cube001" index="1"]
transform = Transform( 1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0.402564, 0.101975, -0.147345 )
enabled = true
cast_to = Vector3( 0, -60, 0 )
collision_mask = 131
collide_with_areas = true
debug_shape_custom_color = Color( 1, 0, 0, 1 )
debug_shape_thickness = 5

[node name="RayCast3" type="RayCast" parent="Cube001" index="2"]
transform = Transform( 1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, -0.0199322, -0.756793, -0.285965 )
enabled = true
cast_to = Vector3( 0, -60, 0 )
collision_mask = 131
collide_with_areas = true
debug_shape_custom_color = Color( 1, 0, 0, 1 )
debug_shape_thickness = 5

[node name="RayCast4" type="RayCast" parent="Cube001" index="3"]
transform = Transform( 1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, -0.0199322, 0.732919, -0.285965 )
enabled = true
cast_to = Vector3( 0, -60, 0 )
collision_mask = 131
collide_with_areas = true
debug_shape_custom_color = Color( 1, 0, 0, 1 )
debug_shape_thickness = 5

[node name="Cylinder002" parent="." index="4"]
transform = Transform( 0.121449, 0, 0, 0, 0.121449, 0, 0, 0, 0.121449, 0.00756806, 1.82495, -0.0196924 )
cast_shadow = 0

[node name="Visible" type="VisibilityNotifier" parent="." index="5"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.569408, 0 )
aabb = AABB( -0.906522, -2.5532, -0.534504, 1.81303, 5.10642, 1.06901 )

[node name="MonsterArea" type="Area" parent="." index="6"]
collision_layer = 12
collision_mask = 4

[node name="CollisionShape" type="CollisionShape" parent="MonsterArea" index="0"]
transform = Transform( 1, 0, 0, 0, 0.922222, 0, 0, 0, 1, 0.0487475, 0.643452, 0 )
shape = SubResource( 1 )

[node name="RandomAudioStreamPlayer" type="AudioStreamPlayer" parent="." index="7"]
script = ExtResource( 2 )
samples = [ ExtResource( 4 ) ]
random_strategy = 2
random_volume_range = 0
random_pitch_range = 0.308

[node name="headVisibility" type="VisibilityNotifier" parent="." index="8"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0255022, 2.75219, 0.0395068 )
aabb = AABB( -0.204448, -0.226886, -0.282064, 0.408896, 0.305334, 0.564128 )

[node name="monsterNoise3D" type="AudioStreamPlayer3D" parent="." index="9"]
unit_db = 2.0
script = ExtResource( 5 )
samples = [ ExtResource( 6 ), ExtResource( 7 ) ]
random_strategy = 2
random_volume_range = 0.5
random_pitch_range = 1.0

[node name="headArea" type="Area" parent="." index="10" groups=["monsterHead"]]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 7.45058e-09, 2.68437, -4.65661e-10 )
collision_layer = 4
collision_mask = 0

[node name="CollisionShape" type="CollisionShape" parent="headArea" index="0"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.00949842, -0.0221035, 0.0352125 )
shape = SubResource( 2 )

[node name="stareDrainSound" type="AudioStreamPlayer" parent="." index="11"]
script = ExtResource( 2 )
samples = [ ExtResource( 8 ) ]
random_strategy = 2
random_volume_range = 0
random_pitch_range = 0.103

[node name="Tween" type="Tween" parent="stareDrainSound" index="0"]

[connection signal="camera_entered" from="Visible" to="." method="_on_Visible_camera_entered"]
[connection signal="camera_exited" from="Visible" to="." method="_on_Visible_camera_exited"]
[connection signal="area_entered" from="MonsterArea" to="." method="_on_MonsterArea_area_entered"]
[connection signal="area_exited" from="MonsterArea" to="." method="_on_MonsterArea_area_exited"]
[connection signal="camera_entered" from="headVisibility" to="." method="_on_headVisibility_camera_entered"]
[connection signal="camera_exited" from="headVisibility" to="." method="_on_headVisibility_camera_exited"]
[connection signal="area_entered" from="headArea" to="." method="_on_headArea_area_entered"]
[connection signal="area_exited" from="headArea" to="." method="_on_headArea_area_exited"]
[connection signal="tween_all_completed" from="stareDrainSound/Tween" to="." method="_on_Tween_tween_all_completed"]
